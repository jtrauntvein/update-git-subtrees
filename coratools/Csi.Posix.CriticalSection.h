/* Csi.Posix.CriticalSection.h

   Copyright (C) 2005, 2005 Campbell Scientific, Inc.

   Written by: Jon Trauntvein
   Date Begun: Friday 25 March 2005
   Last Change: Friday 30 December 2005
   Last Commit: $Date: 2007-02-01 14:58:26 -0600 (Thu, 01 Feb 2007) $ (UTC)
   Last Changed by: $Author: tmecham $

*/

#ifndef Csi_Posix_CriticalSection_h
#define Csi_Posix_CriticalSection_h

#include "Csi.OsException.h"
#include <pthread.h>


namespace Csi
{
   namespace Posix
   {
      ////////////////////////////////////////////////////////////
      // class CriticalSection
      //
      // Defines an object that maintains a critical section in terms the
      // Csi::Posix::Mutex object.
      ////////////////////////////////////////////////////////////
      class CriticalSection
      {
      private:
         ////////////////////////////////////////////////////////////
         // os_handle
         ////////////////////////////////////////////////////////////
         pthread_mutex_t os_handle;
         
      public:
         ////////////////////////////////////////////////////////////
         // constructor
         ////////////////////////////////////////////////////////////
         CriticalSection();

         ////////////////////////////////////////////////////////////
         // destructor
         ////////////////////////////////////////////////////////////
         virtual ~CriticalSection();

         ////////////////////////////////////////////////////////////
         // lock
         ////////////////////////////////////////////////////////////
         void lock();

         ////////////////////////////////////////////////////////////
         // unlock
         ////////////////////////////////////////////////////////////
         void unlock();
      };
   };
};


#endif
