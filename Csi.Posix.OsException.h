/* Csi.Posix.OsException.h

   Copyright (C) 2005, 2005 Campbell Scientific, Inc.

   Written by: Jon Trauntvein
   Date Begun: Thursday 24 March 2005
   Last Change: Thursday 29 December 2005
   Last Commit: $Date: 2007-02-01 14:58:26 -0600 (Thu, 01 Feb 2007) $ (UTC)
   Last Changed by: $Author: tmecham $

*/

#ifndef Csi_Posix_OsException_h
#define Csi_Posix_OsException_h

#include "Csi.MsgExcept.h"
#include <errno.h>


namespace Csi
{
   namespace Posix
   {
      ////////////////////////////////////////////////////////////
      // class OsException
      //
      // Posix specific os exception class.
      ////////////////////////////////////////////////////////////
      class OsException: public MsgExcept
      {
      protected:
         ////////////////////////////////////////////////////////////
         // os_error
         ////////////////////////////////////////////////////////////
         int os_error;

      public:
         ////////////////////////////////////////////////////////////
         // error_code constructor
         ////////////////////////////////////////////////////////////
         OsException(int error_code, char const *msg_);
         
         ////////////////////////////////////////////////////////////
         // constructor
         ////////////////////////////////////////////////////////////
         OsException(char const *msg_);

         ////////////////////////////////////////////////////////////
         // destructor
         ////////////////////////////////////////////////////////////
         virtual ~OsException() throw ()
         { }
         
         ////////////////////////////////////////////////////////////
         // get_osError
         ////////////////////////////////////////////////////////////
         int get_osError() const
         { return os_error; }

      private:
         ////////////////////////////////////////////////////////////
         // set_error
         ////////////////////////////////////////////////////////////
         void set_error(
            char const *message,
            int error_code);
      };
   };
};


#endif
